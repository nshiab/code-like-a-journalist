---
title: Utiliser des biblioth√®ques avec Deno
description: Apprenez √† installer et utiliser des biblioth√®ques TypeScript avec Deno.
---

import { Callout } from 'nextra/components'

# Utiliser des biblioth√®ques avec Deno

Des millions de personnes √† travers le monde travaillent avec JavaScript et TypeScript. L'une des raisons de leur popularit√© est l'immense √©cosyst√®me de biblioth√®ques. De nombreux d√©veloppeurs partagent leur code publiquement, ce qui permet √† tout le monde de l'utiliser gratuitement.

Dans les prochaines le√ßons, nous utiliserons des biblioth√®ques en code ouvert pour analyser d'√©normes ensembles de donn√©es et cr√©er de superbes visualisations interactives.

D'abord, un peu de vocabulaire : les *biblioth√®ques* sont aussi souvent appel√©es *libraries*, *packages* ou *modules*.

Pr√©parons maintenant notre environnement de travail avant de plonger dans cette le√ßon.

Cr√©ez un nouveau dossier quelque part sur votre ordinateur, ouvrez-le avec VS Code et cr√©ez deux fichiers :

- `main.ts`, o√π nous √©crirons notre code. Pour commencer, vous pouvez ajouter `console.log("Hello!");` dedans.
- `deno.json`, qui permet √† VS Code de savoir qu'il s'agit d'un projet Deno et active l'extension Deno. Vous pouvez ajuster les param√®tres dans ce fichier, mais nous le laisserons vide pour l'instant.

Ouvrez le terminal et ex√©cutez la commande suivante : `deno run --watch --check main.ts`

Cette commande efface le terminal et r√©ex√©cute `main.ts` √† chaque fois que vous le sauvegardez (`CMD + S` sur Mac ou `CTRL + S` sur PC).

Vous pouvez utiliser cette configuration pour tester le code fourni dans cette le√ßon.

![Une capture d'√©cran montrant VS Code ex√©cutant et surveillant un fichier TypeScript.](/assets/pushing-further/libraries/setup.png)

## Registres

Les biblioth√®ques sont publi√©es sur des registres publics. Les deux principaux registres sont **NPM** et **JSR**.

Certaines biblioth√®ques sont disponibles sur les deux, tandis que d'autres existent uniquement sur NPM ou JSR.

### NPM

NPM a √©t√© cr√©√© en 2014 et a √©t√© acquis par GitHub (une filiale de Microsoft) en 2020.

Au moment d'√©crire ces lignes (2025-01-29), NPM h√©berge plus de **3,4 millions** de biblioth√®ques t√©l√©charg√©es environ **8 milliards de fois par jour**‚ÄØ! Vous pouvez publier des biblioth√®ques en code ouvert gratuitement, tandis que les biblioth√®ques priv√©es n√©cessitent un abonnement payant.

Prenons un exemple et recherchons `d3`, une biblioth√®que bien connue pour la visualisation de donn√©es que nous utiliserons fr√©quemment.

Allez sur [npmjs.com](https://www.npmjs.com/) et recherchez `d3`.

![Une capture d'√©cran montrant les r√©sultats de NPM pour d3.](/assets/pushing-further/libraries/d3-npm.png)

S√©lectionnez le premier r√©sultat : `d3` avec la description **"Data-Driven Documents"** par Mike Bostock.

Voici [le lien direct](https://www.npmjs.com/package/d3), au cas o√π.

![Une capture d'√©cran montrant la description de d3 sur NPM.](/assets/pushing-further/libraries/d3-description.png)

Cette page fournit de nombreuses informations utiles :
- Dans la section principale, on voit une courte description et des liens vers la documentation, des exemples, et plus encore.
- Sur la droite, il y a un lien vers la page GitHub et le site officiel de la biblioth√®que.
- On peut voir le nombre de t√©l√©chargements hebdomadaires, indiquant la popularit√© de la biblioth√®que.
- La liste des contributeurs inclut **Mike Bostock** et **Philippe Rivi√®re**, deux experts bien connus en visualisation de donn√©es.

Ces d√©tails (ainsi que ceux sur la page GitHub) nous aident √† d√©terminer si une biblioth√®que est fiable. Soyez toujours prudent avant d'ex√©cuter du code inconnu‚ÄØ! ü¶†

Installer `d3` dans un projet Deno est tr√®s simple. Cliquez sur votre terminal, arr√™tez `main.ts` (`CTRL` + `C`), puis ex√©cutez la commande suivante : `deno add npm:d3`

Si vous ouvrez votre `deno.json`, vous verrez quelque chose de nouveau : **imports** ! Ces imports indiquent √† Deno quelles biblioth√®ques (et quelles versions) vous souhaitez utiliser dans ce projet.

![Une capture d'√©cran montrant les imports dans deno.json.](/assets/pushing-further/libraries/d3-add.png)
<Callout type="info" emoji="üí°">
    Comme vous avez tap√© `npm:`, Deno va chercher la derni√®re version de `d3` sur le registre NPM. Il la t√©l√©chargera ensuite et la stockera en cache sur votre disque dur. Puisqu'elle est mise en cache, si vous avez besoin de `d3` dans un autre projet et que sa derni√®re version n'a pas chang√©, Deno l'utilisera depuis le cache plut√¥t que de la t√©l√©charger √† nouveau. Cela acc√©l√®re les installations futures et √©vite d'avoir plusieurs versions de la m√™me biblioth√®que sur votre ordinateur.
</Callout>

Utiliser `d3` est maintenant tr√®s simple. Dans vos imports, `"d3": "npm:d3@^7.9.0"` signifie que vous pouvez utiliser le raccourci `d3` pour appeler la biblioth√®que.

Reprenons le [fichier CSV des temp√©ratures de Montr√©al](https://raw.githubusercontent.com/nshiab/data-fetch-lesson/refs/heads/main/temp.csv) de la le√ßon [R√©cup√©rer des donn√©es](/pushing-further/fetch).

Si vous r√©cup√©rez ces donn√©es, vous remarquerez que c'est juste du texte. CSV signifie **Comma-Separated Values** (valeurs s√©par√©es par des virgules) et vous ne pouvez pas travailler avec directement. Il serait bien mieux de le convertir en une liste d'objets.

Copiez-collez le code ci-dessous dans `main.ts`, puis ex√©cutez la commande suivante : `deno run --watch --check -A main.ts`

N'oubliez pas `-A`, sinon votre code ne sera pas autoris√© √† r√©cup√©rer des donn√©es !

```ts showLineNumbers filename="main.ts"
const response = await fetch(
  "https://raw.githubusercontent.com/nshiab/data-fetch-lesson/refs/heads/main/temp.csv",
);

const data = await response.text();

console.log(data);
```

![Une capture d'√©cran montrant des donn√©es CSV dans le terminal.](/assets/pushing-further/libraries/d3-text.png)

C'est notre jour de chance : la fonction `csvParse` de `d3` convertit les donn√©es CSV en une liste d'objets‚ÄØ!

Mettons √† jour notre code pour l'utiliser.

```ts showLineNumbers filename="main.ts" {1, 8, 10}
import { csvParse } from "d3";

const response = await fetch(
  "https://raw.githubusercontent.com/nshiab/data-fetch-lesson/refs/heads/main/temp.csv",
);

const data = await response.text();
const arrayOfObjects = csvParse(data);

console.log(arrayOfObjects);
```
![Une capture d'√©cran montrant des donn√©es CSV converties en une liste d'objets dans le terminal.](/assets/pushing-further/libraries/d3-parse.png)

<Callout type="info" emoji="üí°">
    Dans la [le√ßon sur les fonctions](/pushing-further/functions), nous avons vu que nous pouvons importer des fonctions avec la syntaxe `import myFunction from "./myFunction"`. Ici, c'est un peu diff√©rent, car `d3` exporte plusieurs fonctions, et nous choisissons uniquement celle(s) que nous voulons. Pour cela, nous utilisons des accolades avec cette syntaxe : `import { myFunctionA, myFunctionB } from "./allMyFunctions"`.
</Callout>

F√©licitations ! Vous venez d‚Äôinstaller `d3` depuis NPM et d‚Äôutiliser l‚Äôune de ses fonctions ! üíÉüï∫

### JSR

JSR a √©t√© lanc√© en 2024. C‚Äôest le petit nouveau et il est maintenu par l‚Äô√©quipe de Deno.

Il se concentre sur des biblioth√®ques modernes, con√ßues avant tout pour TypeScript. Installer une biblioth√®que depuis JSR est identique √† une installation depuis NPM. Cependant, publier une biblioth√®que est beaucoup plus simple sur JSR (mais nous verrons cela dans une autre le√ßon).

Recherchons une biblioth√®que pour convertir notre fichier CSV. Rendez-vous sur [jsr.io](https://jsr.io/) et recherchez `csv`.

![Une capture d'√©cran montrant les r√©sultats de JSR.](/assets/pushing-further/libraries/jsr-csv.png)

Parmi les r√©sultats, vous verrez une biblioth√®que commen√ßant par `@std`. Cela signifie qu‚Äôelle fait partie de la **biblioth√®que standard** et qu‚Äôelle est maintenue par l‚Äô√©quipe de Deno, ce qui garantit des biblioth√®ques de haute qualit√© et bien test√©es pour des cas d‚Äôusage courants.

Utilisons-la ! [Cliquez ici](https://jsr.io/@std/csv).

![Une capture d'√©cran montrant la biblioth√®que standard JSR.](/assets/pushing-further/libraries/jsr-std.png)

Vous trouverez de nombreuses informations utiles sur cette page :
- Un lien vers la page GitHub.
- La documentation et des exemples.
- La date de publication de la derni√®re version.

Au moment d'√©crire ces lignes, une diff√©rence par rapport √† NPM est l‚Äôabsence du nombre de t√©l√©chargements. Cette fonctionnalit√© a √©t√© demand√©e et devrait √™tre ajout√©e prochainement. Cependant, vous pouvez toujours consulter le nombre d'√©toiles sur la page GitHub de la biblioth√®que afin d‚Äôavoir une id√©e de sa popularit√©. La [biblioth√®que standard de Deno](https://github.com/denoland/std) a plus de 3 000 √©toiles, ce qui est consid√©rable. üåü

Pour installer la biblioth√®que, arr√™tez l‚Äôex√©cution de `main.ts` (`CTRL` + `C`) et ex√©cutez la commande suivante : `deno add jsr:@std/csv`

Vous verrez `@std/csv` √™tre ajout√©e √† votre `deno.json`.

Comme vous l‚Äôavez peut-√™tre remarqu√©, nous avons utilis√© `jsr:` au lieu de `npm:` pour que Deno cherche la biblioth√®que sur JSR au lieu de NPM.

![Une capture d'√©cran montrant un module JSR ajout√©.](/assets/pushing-further/libraries/jsr-add.png)

<Callout type="info" emoji="üí°">
    Tout comme les modules NPM, les modules JSR sont mis en cache. Si vous devez vider votre cache, ex√©cutez `deno clean`. Et pour installer toutes les biblioth√®ques list√©es dans un fichier `deno.json`, vous pouvez ex√©cuter `deno install`.
</Callout>

Mettons maintenant √† jour notre code dans `main.ts` pour utiliser `@std` au lieu de `d3`. Une diff√©rence cl√© est que nous devons d√©finir l'option `skipFirstRow` sur `true` pour ignorer la premi√®re ligne qui contient les en-t√™tes des colonnes CSV.

```ts showLineNumbers filename="main.ts" {1, 8}
import { parse } from "@std/csv";

const response = await fetch(
  "https://raw.githubusercontent.com/nshiab/data-fetch-lesson/refs/heads/main/temp.csv",
);

const data = await response.text();
const arrayOfObjects = parse(data, { skipFirstRow: true });

console.log(arrayOfObjects);
```
![Une capture d'√©cran montrant un fichier CSV converti en liste d'objets avec la biblioth√®que standard.](/assets/pushing-further/libraries/jsr-done.png)

Et... voil√†‚ÄØ! Vous avez install√© et utilis√© une biblioth√®que depuis JSR‚ÄØ! üíÉüï∫

## Conclusion

Vous vous demandez s√ªrement comment d√©couvrir de nouvelles biblioth√®ques...

Eh bien, face √† un probl√®me, une recherche Google pour des tutoriels et articles de blog peut √™tre tr√®s utile. Demander √† votre chatbot pr√©f√©r√© peut aussi vous aider.

Et bien s√ªr, il existe d'excellents cours (comme celui-ci üòè) qui vous feront d√©couvrir les biblioth√®ques incontournables‚ÄØ!