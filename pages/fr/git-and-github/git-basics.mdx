---
title: Comment utiliser Git ?
description: Dans cette leÃ§on, nous apprenons les bases de l'utilisation de Git.
---

import { Callout } from "nextra/components";
import { NoticeIntro, NoticeEnd } from "../../../components/Notices.jsx";

# Comment utiliser Git ?

Programmer, câ€™est dur. Vous avez beaucoup de code rÃ©parti dans nombreux fichiers, ce qui rend compliquÃ© le suivi de tout ce que vous faites. Et câ€™est encore plus difficile si vous collaborez avec dâ€™autres personnesâ€¯!

Câ€™est pourquoi [Git](https://git-scm.com/) a Ã©tÃ© lancÃ© en 2005 et est maintenant utilisÃ© par des millions de programmeurs Ã  travers le monde. Câ€™est un **systÃ¨me de gestion de versions** en code ouvert. Câ€™est le genre dâ€™outil qui, une fois adoptÃ©, vous fait vous demander comment vous avez pu travailler sansâ€¯!

Dans ce projet, nous allons crÃ©er un programme simple pour rÃ©cupÃ©rer la tempÃ©rature actuelle Ã  MontrÃ©al et utiliser Git pour le versionner Ã  chaque Ã©tape.

Notez que je vais vous montrer comment utiliser Git dans le terminal. Je pense que c'est important pour comprendre comment cet outil fonctionne. Mais la prochaine leÃ§on sera plus visuel grÃ¢ce Ã  l'interface de GitHub.

<NoticeIntro lang="fr" />

## Installation

Tout dâ€™abord, vous devez installer Git. Les Ã©tapes peuvent varier selon votre systÃ¨me dâ€™exploitation. Suivez [les Ã©tapes correspondantes sur le site officiel de Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git).

![Ã‰tapes dâ€™installation de Git.](/assets/git-and-github/git-basics/install.png)

## Initialisation

Une fois Git installÃ©, crÃ©ez un nouveau dossier et ouvrez-le avec VS Code.

Si vous cliquez sur `Source Control` dans la barre latÃ©rale gauche, vous verrez quâ€™il nâ€™y a pas de dÃ©pÃ´t Git dans ce projet.

![Message dans VS Code indiquant quâ€™il nâ€™y a pas de dÃ©pÃ´t Git.](/assets/git-and-github/git-basics/no-repo.png)

Pour initialiser un nouveau dÃ©pÃ´t Git, exÃ©cutez cette commande dans le terminal : `git init`.

Votre projet utilise maintenant Gitâ€¯! Mais il nâ€™y a rien dedans pour l'instant.

![Message dans VS Code indiquant quâ€™un dÃ©pÃ´t Git est prÃ©sent.](/assets/git-and-github/git-basics/repo-init.png)

Tout ce que vous sauvegardez avec Git sera stockÃ© dans un dossier cachÃ© `.git` dans votre projet.

![Un dossier Git cachÃ©.](/assets/git-and-github/git-basics/git-folder.png)

## Nouveaux fichiers

CrÃ©ons un nouveau fichier `main.ts` et allons chercher les donnÃ©es mÃ©tÃ©o les plus rÃ©centes Ã  MontrÃ©al depuis l'[API du Service mÃ©tÃ©orologique du Canada](https://eccc-msc.github.io/open-data/msc-data/obs_station/readme_obs_insitu_swobdatamart_en/).

Cette API retourne les donnÃ©es au format XML. Nous les affichons dans le terminal.


```ts showLineNumbers filename="main.ts"
const response = await fetch(
  "https://dd.weather.gc.ca/observations/swob-ml/latest/CWTQ-AUTO-minute-swob.xml",
);
const xml = await response.text();

console.log(xml)
```

Vous pouvez maintenant voir votre nouveau fichier sous `Changes`. Sa couleur est aussi passÃ©e au vert et un `U` est affichÃ© Ã  cÃ´tÃ©, ce qui signifie `Untracked`. Vous pouvez Ã©galement voir un `1` dans la barre latÃ©rale gauche, Ã  cÃ´tÃ© du bouton `Source Control`, indiquant quâ€™un fichier a Ã©tÃ© modifiÃ©.

Git vous informe quâ€™il sâ€™agit dâ€™un nouveau fichier â€” il ne lâ€™a jamais vu auparavant et ne le suit pas encore.

![Message dans VS Code indiquant quâ€™un fichier nâ€™est pas suivi.](/assets/git-and-github/git-basics/new-file.png)

Juste pour vÃ©rifier que le code fonctionne, vous pouvez exÃ©cuter `deno -A main.ts`. Vous devriez voir les donnÃ©es XML affichÃ©es dans le terminal.

![DonnÃ©es XML affichÃ©es dans le terminal.](/assets/git-and-github/git-basics/xml-logged.png)

## Suivi et enregistrement

Git ne sauvegarde pas automatiquement votre travail. Vous devez lui indiquer quand sauvegarder votre projet. Pour enregistrer vos modifications, vous devez les **valider** (*commit*). Chaque commit possÃ¨de un identifiant (gÃ©nÃ©rÃ© par Git) et un message que vous devez fournir.

Faire un commit se fait en deux Ã©tapes :
- Dâ€™abord, vous suivez les fichiers (nouveaux fichiers, fichiers supprimÃ©s)
- Ensuite, vous validez avec un message

Faisons-le. Pour suivre tous les fichiers du projet, exÃ©cutez dans votre terminal : `git add -A`

Puis validez avec cette commande, encore une fois dans votre terminal : `git commit -m "Fetching XML data"`

Lâ€™option `-m` indique Ã  Git que vous fournissez un message, que vous Ã©crivez juste aprÃ¨s entre guillemets.

Et voilÃ â€¯! Vous pouvez maintenant voir votre commit dans la section `Graph`.

![Premier commit.](/assets/git-and-github/git-basics/first-commit.png)

## Mise Ã  jour des fichiers

Nous avons des donnÃ©es XML, ce qui nâ€™est pas trÃ¨s pratique. Il serait prÃ©fÃ©rable dâ€™avoir des donnÃ©es au format JSON.

Installons la librairie [`fast-xml-parser`](https://www.npmjs.com/package/fast-xml-parser) depuis NPM pour convertir nos donnÃ©es.

Dans votre terminal, exÃ©cutez : `deno add npm:fast-xml-parser`

Puis mettez Ã  jour votre fichier `main.ts`.

```ts showLineNumbers filename="main.ts" {1, 6-9}
import { XMLParser } from "fast-xml-parser";

const response = await fetch(
  "https://dd.weather.gc.ca/observations/swob-ml/latest/CWTQ-AUTO-minute-swob.xml",
);
const xml = await response.text();
const json = new XMLParser({ ignoreAttributes: false }).parse(xml);

console.log(json);
```

Vous verrez maintenant dâ€™autres changements. Comme nous avons installÃ© une librairie, Deno a crÃ©Ã© les fichiers `deno.json` et `deno.lock`. Ils sont en vert et non suivis.

Mais `main.ts` est en jaune avec un `M` Ã  cÃ´tÃ©. Cela signifie que Git indique que ce fichier a Ã©tÃ© modifiÃ©.

Vous pouvez exÃ©cuter `deno -A main.ts` juste pour vous assurer que le code fonctionne.

![Des fichiers ont Ã©tÃ© modifiÃ©s.](/assets/git-and-github/git-basics/changes.png)

Vous pouvez vÃ©rifier les changements ligne par ligne dans le fichier. Ã€ cÃ´tÃ© des numÃ©ros de ligne, vous verrez des barres colorÃ©es :
- Vert signifie que la ligne est nouvelle
- Bleu signifie que la ligne a Ã©tÃ© modifiÃ©e
- Rouge signifie que des lignes ont Ã©tÃ© supprimÃ©es

Si vous cliquez sur les barres, vous verrez les dÃ©tails. Les ajouts sont affichÃ©s en vert, les suppressions en rouge. Si vous souhaitez revenir Ã  la version prÃ©cÃ©dente, cliquez sur la flÃ¨che de retour.

![Inspection des modifications dans le fichier.](/assets/git-and-github/git-basics/inspecting-changes.png)

Vous pouvez Ã©galement voir toutes les diffÃ©rences dans lâ€™onglet `Source Control`. Cliquez sur `main.ts` pour afficher le `Working Tree`.

Par exemple, ici, on voit clairement que nous utilisons une nouvelle librairie (lignes vertes Ã  droite) et que nous avons supprimÃ© `console.log(xml)` (en rouge Ã  gauche).

Si vous souhaitez revenir Ã  une version prÃ©cÃ©dente du fichier, vous pouvez aussi cliquer sur la flÃ¨che de retour sous `Changes`.

![Inspection des modifications dans le fichier via la working tree.](/assets/git-and-github/git-basics/working-tree.png)

Faisons un commit de ces changements :
- ExÃ©cutez `git add -A`
- Puis `git commit -m "XML to JSON"`

Vous pouvez maintenant voir votre deuxiÃ¨me commit dans le `Graph`. Et si vous cliquez dessus, vous pouvez voir tous les changements effectuÃ©s par rapport au commit prÃ©cÃ©dent.

Nâ€™oubliez pas de faire dÃ©filer pour voir les modifications dans `deno.json`, `deno.lock` et `main.ts`.

![Inspection de toutes les modifications dâ€™un commit.](/assets/git-and-github/git-basics/second-commit.png)

## Annuler un commit

L'une des fonctionnalitÃ©s les plus puissantes de Git est la possibilitÃ© de revenir facilement Ã  un commit prÃ©cÃ©dent.

Par exemple, crÃ©ons une erreur dans notre code. Essayons dâ€™analyser la rÃ©ponse du `fetch` comme du JSON au lieu de texte dans `main.ts`.


```ts showLineNumbers filename="main.ts" /.json()/
import { XMLParser } from "fast-xml-parser";

const response = await fetch(
  "https://dd.weather.gc.ca/observations/swob-ml/latest/CWTQ-AUTO-minute-swob.xml",
);
const xml = await response.json();
const json = new XMLParser({ ignoreAttributes: false }).parse(xml);

console.log(json);
```

Faisons un commit de cette modification avant de la tester ğŸ˜± :  
- `git add -A`  
- `git commit -m "Parsing response as JSON"`

Et ensuite, testons notre nouveau code avec `deno -A main.ts`.

![Un troisiÃ¨me commit.](/assets/git-and-github/git-basics/error.png)


Oh nonâ€¯! Ã‡a planteâ€¯! Et nous avons dÃ©jÃ  validÃ©â€¯! Comment revenir en arriÃ¨reâ€¯?

Bien sÃ»r, vous pouvez toujours vÃ©rifier les changements et corriger le code manuellement. Mais si vous travaillez sur un gros projet, ce nâ€™est pas toujours rÃ©aliste. Ã€ la place, vous pouvez utiliser la commande `git revert` avec lâ€™identifiant du commit.

Pour rÃ©cupÃ©rer un identifiant de commit, faites un clic droit sur le commit et cliquez sur `Copy Commit ID`. Ici, le commit que nous voulons annuler est le plus rÃ©cent.

![Copie de lâ€™ID dâ€™un commit.](/assets/git-and-github/git-basics/copy-id.png)

Commencez ensuite Ã  taper `git revert` dans le terminal, collez lâ€™identifiant du commit (nâ€™oubliez pas lâ€™espace entre `revert` et lâ€™ID du commit), puis exÃ©cutez la commandeâ€¯!

Ce que vous voyez dans votre terminal est un Ã©diteur de texte. Les lignes au-dessus de la section `#` reprÃ©sentent le message de commit proposÃ©.

![Annulation dâ€™un commit.](/assets/git-and-github/git-basics/revert.png)

Pour accepter le message proposÃ©, tapez simplement `:q` dans le terminal et appuyez sur EntrÃ©e pour confirmer et quitter lâ€™Ã©diteur de texte du terminal. Vous pouvez aussi cliquer sur le gros bouton bleu `Commit`.

Vous verrez maintenant un quatriÃ¨me commit, indiquant que vous avez annulÃ© le prÃ©cÃ©dentâ€¯! Pour un *vrai* retour en arriÃ¨re, vous pouvez aussi utiliser [`git reset`](https://git-scm.com/docs/git-reset), mais `revert` est plus sÃ»r et garde une trace de tout â€” y compris de lâ€™annulationâ€¯!

Maintenant, si vous exÃ©cutez `deno -A main.ts`, tout fonctionne comme avant notre stupide erreur.

![Un commit annulÃ©.](/assets/git-and-github/git-basics/reverted.png)

## Branches

Un autre concept important dans Git est celui des **branches**.

Par dÃ©faut, un dÃ©pÃ´t a une branche `main`. Vous pouvez voir votre branche en bas Ã  gauche dans VS Code, ainsi quâ€™Ã  cÃ´tÃ© de vos commits. Jusquâ€™ici, nous avons travaillÃ© sur `main`.

![La branche main dans VS Code.](/assets/git-and-github/git-basics/main-branch.png)

En gÃ©nÃ©ral, on essaie (ğŸ˜…) de garder `main` propre et on travaille dans des branches sÃ©parÃ©es.

Par exemple, disons que nous voulons maintenant extraire la date et la tempÃ©rature Ã  partir des donnÃ©es rÃ©cupÃ©rÃ©es pour MontrÃ©al. On pourrait crÃ©er une nouvelle branche pour ajouter ce code au projet.

### Ajouter une branche

Pour crÃ©er une nouvelle branche nommÃ©e `temperature`, exÃ©cutez : `git checkout -b temperature`

La commande `checkout` indique Ã  Git que vous voulez changer de branche. Lâ€™option `-b` suivie de `temperature` lui dit de crÃ©er une nouvelle branche `temperature` avant de sâ€™y positionner. Comme vous Ãªtes sur `main`, la branche sera crÃ©Ã©e Ã  partir de `main`. Le code sera exactement le mÃªme sur les deux branches au dÃ©part.

Pour voir la liste de toutes les branches, exÃ©cutez `git branch`. Celle avec un `*` devant est celle sur laquelle vous Ãªtes actuellement.

![La branche temperature branch dans VS Code.](/assets/git-and-github/git-basics/new-branch.png)

### Travailler dans une branche

Nous pouvons maintenant mettre Ã  jour notre code dans `main.ts`. Les donnÃ©es sont un JSON profondÃ©ment imbriquÃ©, mais rÃ©cupÃ©rer `resultTime` et `temperature` est simple.

Si vous exÃ©cutez `deno -A main.ts`, vous devriez voir la tempÃ©rature affichÃ©e dans le terminal.


```ts showLineNumbers filename="main.ts" {9-23}
import { XMLParser } from "fast-xml-parser";

const response = await fetch(
  "https://dd.weather.gc.ca/observations/swob-ml/latest/CWTQ-AUTO-minute-swob.xml",
);
const xml = await response.text();
const json = new XMLParser({ ignoreAttributes: false }).parse(xml);

const observation =
  json["om:ObservationCollection"]["om:member"]["om:Observation"];

const resultTime =
  observation["om:resultTime"]["gml:TimeInstant"]["gml:timePosition"];
console.log(resultTime);

const elements = observation["om:result"]["elements"]["element"];
type element = {
  "@_name": string;
  "@_value": string;
};
const temp = elements
  .find((d: element) => d["@_name"] === "air_temp")["@_value"];
console.log(temp);
```

Faisons un commit de cette mise Ã  jour :  
- `git add -A`  
- `git commit -m "Extracting temp and time"`

![Travail sur la branche temperature.](/assets/git-and-github/git-basics/commit-new-branch.png)

Ce commit a Ã©tÃ© fait sur la branche `temperature`. La branche `main`, elle, nâ€™a pas Ã©tÃ© modifiÃ©e. Pour revenir Ã  la branche `main`, utilisez `git checkout main`.

Comme vous pouvez le constater, notre nouveau code nâ€™est pas lÃ â€¯! Si jamais nous avons introduit une erreur ou un bug dans la branche `temperature`, nous savons que `main` ne lâ€™a pas.

Câ€™est pour cela que les branches sont si pratiquesâ€¯: vous pouvez travailler en toute confiance dessus. Vous pouvez tester et casser des choses sans craindre de perdre vos avancÃ©es. Elles sont Ã  lâ€™abriâ€¯! Les branches sont aussi trÃ¨s utiles quand plusieurs personnes collaborent. Chacun peut travailler sur sa propre fonctionnalitÃ© dans sa propre branche.

![Passer sur la branche main.](/assets/git-and-github/git-basics/checkout-main.png)

### Fusionner des branches

Disons maintenant que nous sommes satisfaits du nouveau code dans la branche `temperature`. Nous voulons lâ€™intÃ©grer Ã  la branche `main`.

Pour cela, nous devons **fusionner** les branches.

Assurez-vous dâ€™Ãªtre sur la branche `main` (`git checkout main`), puis exÃ©cutez `git merge temperature`. Cette commande va fusionner la branche `temperature` dans `main`.

Et voilÃ , le nouveau code est sur `main`â€¯! Et vous pouvez voir le commit que nous avons fait dans `temperature`. Lâ€™historique a Ã©tÃ© fusionnÃ©.

![Fusion avec la branche main.](/assets/git-and-github/git-basics/merge-main.png)

### Supprimer une branche

Nous nâ€™avons plus besoin de la branche `temperature`. Supprimons-la avec la commande : `git branch -d temperature`

Comme vous pouvez le voir, la syntaxe est la mÃªme que pour crÃ©er une branche, sauf que lâ€™option est `-d` au lieu de `-b`. Faites attentionâ€¯! ğŸ˜¬

Maintenant, si vous exÃ©cutez `git branch`, vous ne verrez plus `temperature`.

![Suppression de la branche temperature.](/assets/git-and-github/git-basics/delete-branch.png)

## Supprimer Git

Si, pour une raison quelconque, vous devez supprimer Git dâ€™un projet, vous devez supprimer le dossier cachÃ© `.git`.

Vous pouvez le faire depuis votre explorateur de fichiers.

![Un dossier Git cachÃ©.](/assets/git-and-github/git-basics/git-folder.png)

Ou depuis votre terminal avec cette commande : `rm -fr .git`

Mais vous devez Ãªtre **extrÃªmement prudent** en lâ€™utilisant. Cette commande supprime tout de maniÃ¨re rÃ©cursive. Elle pourrait effacer lâ€™intÃ©gralitÃ© de votre ordinateur. Assurez-vous dâ€™Ãªtre dans votre projet et vÃ©rifiez bien ce que vous tapez.

## Conclusion

FÃ©licitationsâ€¯! Vous avez appris les commandes Git les plus importantes :
- `git init` pour dÃ©marrer un nouveau dÃ©pÃ´t Git
- `git add -A` pour suivre les fichiers
- `git commit -m "Un message"` pour enregistrer le projet
- `git revert commitID` pour annuler un commit
- `git branch -b ma-nouvelle-branche` pour crÃ©er une nouvelle branche
- `git checkout ma-nouvelle-branche` pour changer de branche
- `git merge ma-nouvelle-branche` pour fusionner des branches
- `git branch -d ma-nouvelle-branche` pour supprimer une branche

Ces huit commandes couvrent 95â€¯% de vos besoins quotidiens.

Bien sÃ»r, notre exemple ici Ã©tait assez simple. Les choses peuvent devenir plus complexes quand plusieurs personnes travaillent en mÃªme temps sur diffÃ©rentes branches, et des conflits peuvent survenir. Mais cela devrait suffire pour bien dÃ©marrer votre aventure avec Gitâ€¯!

Au fait, Git fonctionne trÃ¨s bien avec tous les fichiers texte, mais vous pouvez aussi suivre des images, des vidÃ©os, et bien plus encoreâ€¯!

Et un dernier conseil : faites des commits frÃ©quents et partez toujours du principe que vos messages sont publics. On ne sait jamais quand on devra demander de lâ€™aide Ã  un collÃ¨gueâ€¯! Et si vous travaillez sur un projet en code ouvertâ€¦ eh bien, tout le monde verra vos commitsâ€¯! ğŸ˜…

Git, câ€™est super, mais jusquâ€™Ã  prÃ©sent, tout reste sur notre ordinateur. Dans la prochaine leÃ§on, nous parlerons de GitHub, qui permet de stocker votre code dans le cloud, gratuitementâ€¯!

<NoticeEnd lang="fr" />
