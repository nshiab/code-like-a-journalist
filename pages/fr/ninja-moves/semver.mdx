---
title: Comprendre le versionnage de librairies (SemVer)
description: Dans cette leÃ§on, on apprend ce quâ€™est le versionnage sÃ©mantique et comment lâ€™interprÃ©ter.
---

import { NoticeIntro, NoticeEnd } from "../../../components/Notices.jsx"

# Comprendre le versionnage de librairies

Vous avez peut-Ãªtre remarquÃ© que les versions de librairies sur NPM, JSR et dans votre fichier `deno.json` (ou `package.json`) sont accompagnÃ©es de numÃ©ros.

Par exemple, au moment dâ€™Ã©crire ces lignes, la librairie [Simple Data Analysis](https://github.com/nshiab/simple-data-analysis) est Ã  la version 5.0.5. Câ€™est ce quâ€™on appelle le **versionnage sÃ©mantique**, ou **SemVer** pour faire court.

Quand les responsables dâ€™une librairie mettent Ã  jour ces numÃ©ros, câ€™est (en gÃ©nÃ©ral ğŸ˜…) pour une bonne raison et, dans cette leÃ§on, je vais vous expliquer laquelle !

![Une capture dâ€™Ã©cran montrant la version de la librairie Simple Data Analysis.](/assets/ninja-moves/semver/sda-github.png)

<NoticeIntro lang="fr" />

## Majeure, mineure et patch

### Majeure

Le premier chiffre correspond Ã  la version majeure. Quand ce chiffre change, cela signifie que des changements importants et **incompatibles** ont Ã©tÃ© introduits. Si vous utilisez une ancienne version et que vous mettez Ã  jour la librairie, vous devrez probablement modifier votre code. Certaines classes, mÃ©thodes, fonctions, etc. ont Ã©tÃ© modifiÃ©es ou supprimÃ©es.

Donc si vous prÃ©voyez de mettre Ã  jour vers une version majeure, prÃ©voyez toujours un peu de temps pour ajuster votre projet. Et demandez-vous toujours si Ã§a en vaut vraiment la peine !

Par exemple, si vous utilisez `simple-data-analysis@5.0.0` et quâ€™une nouvelle version `simple-data-analysis@6.0.0` sort, consultez les [notes de version](https://github.com/nshiab/simple-data-analysis/releases) pour Ã©valuer les avantages et les inconvÃ©nients dâ€™une mise Ã  jour dans votre projet.

Il y a aussi un point important Ã  savoir sur les versions majeures : lorsquâ€™une librairie est en `v0.x.x`, cela signifie gÃ©nÃ©ralement quâ€™elle nâ€™est pas encore prÃªte. Les responsables vont probablement introduire beaucoup de changements importants avant dâ€™atteindre une `v1.0.0`, le temps de trouver la meilleure maniÃ¨re de tout construire. Beaucoup de bugs sont aussi Ã  prÃ©voir.

### Mineure

Les versions mineures sont gÃ©nÃ©ralement utilisÃ©es pour annoncer de nouvelles fonctionnalitÃ©s.

Par exemple, si vous utilisez `simple-data-analysis@5.0.0` et quâ€™une nouvelle version `simple-data-analysis@5.1.0` sort, cela signifie probablement quâ€™une nouvelle classe, de nouvelles mÃ©thodes ou fonctions sont disponibles. Les anciennes sont toujours lÃ  et devraient continuer Ã  fonctionner.

Câ€™est beaucoup plus sÃ»r de mettre Ã  jour vers une version mineure, car vous ne devriez pas avoir Ã  rÃ©Ã©crire votre projet. Mais bon, câ€™est du code, et les mainteneurs sont humains (pour l'instant ğŸ¤–)â€¦ donc il peut toujours y avoir des surprises ! ğŸ˜¬

### Patch

Les versions patch sont utilisÃ©es pour corriger des bugs et amÃ©liorer le fonctionnement en coulisses. Elles nâ€™apportent gÃ©nÃ©ralement rien de nouveau. Elles rendent juste la librairie plus stable.

Ce sont les versions les plus sÃ»res Ã  mettre Ã  jour. Vous ne devriez pas avoir besoin de changer votre code pour une mise Ã  jour patch.

### Autres versions

Certains mainteneurs publient aussi des versions `alpha`, `beta` et `rc` (*release candidate*).

Ces versions sont disponibles Ã  tous, mais Ã  vos risques et pÃ©rils. De nombreux bugs et changements incompatibles sont Ã  prÃ©voir.

## `^` et `~`

Comme ce serait agaÃ§ant de devoir mettre Ã  jour tout le temps les librairies pour chaque nouvelle version `minor` ou `patch`, certains projets ajoutent un prÃ©fixe `^` ou `~` devant les versions dans les fichiers `deno.json` ou `package.json`.

Ces symboles dÃ©finissent une **plage** de versions acceptables pour une librairie.

### `^` (accent circonflexe)

Le `^` signifie que le projet doit rester sur une mÃªme version majeure, mais peut utiliser nâ€™importe quelle version mineure ou patch.

Par exemple, `simple-data-analysis@^5.0.0` signifie que le projet peut utiliser nâ€™importe quelle version de `v5.x.x`. Donc `simple-data-analysis@5.1.0` et `simple-data-analysis@5.1.1` sont valides.

### `~` (tilde)

Le `~` est plus strict : le projet doit rester sur une mÃªme version majeure **et** mineure, mais peut utiliser nâ€™importe quel patch.

Par exemple, `simple-data-analysis@~5.1.0` signifie que le projet peut utiliser nâ€™importe quelle version de `v5.1.x`, comme `simple-data-analysis@5.1.1`.

## Mettre Ã  jour ses dÃ©pendances

Vous pouvez suivre des projets et des mainteneurs sur GitHub pour rester Ã  jour avec vos librairies prÃ©fÃ©rÃ©es (voyez la [leÃ§on sur GitHub](/git-and-github/github-basics)), mais vous pouvez aussi utiliser directement Deno et NPM pour vÃ©rifier si certaines de vos librairies sont dÃ©passÃ©es.

### Deno

Avec Deno, vous pouvez exÃ©cuter la commande `deno outdated` dans votre terminal. Deno va automatiquement vÃ©rifier JSR et NPM et vous indiquer les mises Ã  jour disponibles. Vous pouvez ensuite choisir les librairies Ã  mettre Ã  jour.

Il existe aussi [plusieurs options](https://docs.deno.com/runtime/reference/cli/outdated/) avec cette commande.

VÃ©rifiez toujours que votre projet fonctionne correctement aprÃ¨s une mise Ã  jour, et que les bonnes versions sont bien Ã©crites dans votre fichier `deno.json`.

### NPM

NPM propose la mÃªme chose avec la commande `npm outdated`. Pour mettre Ã  jour les librairies, vous pouvez utiliser `npm update`.

Encore une fois, vÃ©rifiez toujours que votre projet fonctionne comme prÃ©vu aprÃ¨s la mise Ã  jour, et que les bonnes versions sont bien Ã©crites dans votre fichier `package.json`.

## Conclusion

Le SemVer est utile pour comprendre les consÃ©quences possibles dâ€™une mise Ã  jour de librairie. Mais nâ€™oubliez pas que ce nâ€™est quâ€™une convention. Rien nâ€™oblige quiconque Ã  la suivre.

Dâ€™ailleurs, certains gros projets en code ouvert ne suivent pas le SemVer, comme... TypeScript ! Lâ€™Ã©quipe utilise plutÃ´t un calendrier de publication fixe et sâ€™y tient. La derniÃ¨re fois que jâ€™ai vÃ©rifiÃ©, ils publiaient une nouvelle version mineure tous les trois mois, et une version majeure quand la version mineure dÃ©passait `9`. Mais ils font beaucoup dâ€™efforts pour Ã©viter les changements incompatibles, donc les mises Ã  jour sont souvent invisibles pour des codeurs comme nous !

<NoticeEnd lang="fr" />
