---
title: Calculateur de compte Ã©pargne ğŸ’¸
description: Apprenez Ã  coder un calculateur de compte Ã©pargne avec TypeScript dans ce tutoriel.
---

import { Callout } from "nextra/components";
import { NoticeIntro, NoticeEnd } from "../../components/Notices.jsx"
import YouTube from "../../components/YouTube.jsx"

# Calculateur de compte Ã©pargne ğŸ’¸

<YouTube videoId="VLMEuT45CEQ" lang="fr" />

Bienvenue dans votre premier projet ! Notez que je m'attends Ã  ce que vous ayez terminÃ© les leÃ§ons de la section *Premiers pas* ğŸ§‘â€ğŸ“. Si ce nâ€™est pas le cas, [commencez ici](/first-steps/setup).

Dans ce projet, nous allons coder un calculateur de compte Ã©pargne. Cela vous permettra de pratiquer les bases que nous avons vues dans les leÃ§ons prÃ©cÃ©dentes et de renforcer ces concepts avec un exemple concret.

Voici ce que vous verrez dans votre terminal Ã  la fin de ce projet. Votre calculateur gÃ©nÃ©rera des taux d'intÃ©rÃªt annuels alÃ©atoires, alors parfois vous gagnerezÂ ğŸ“ˆ, et parfois vous perdrezÂ ğŸ“‰ !

![Une capture d'Ã©cran montrant le terminal VS Code avec un tableau et des chaÃ®nes de caractÃ¨res affichÃ©s.](/assets/saving-account-calculator/results.png)

<NoticeIntro lang="fr"/>

## Quelle est la question ?

En journalisme (et dans de nombreux autres domaines), il est important dâ€™identifier clairement la question Ã  laquelle on veut rÃ©pondre dÃ¨s le dÃ©but.

Voici la question Ã  laquelle nous voulons attaquer aujourd'hui :
- Combien pourrais-je gagner en plaÃ§ant mon argent dans un compte Ã©pargne ?

Dans mes projets, jâ€™aime identifier un indicateur dÃ¨s le dÃ©but qui rÃ©pondra Ã  la question. Ici, lâ€™indicateur serait la **diffÃ©rence** entre le **montant initial** et le **solde final** du compte.

En gÃ©nÃ©ral, il y a Ã©galement des variables ou des paramÃ¨tres que lâ€™on peut identifier dÃ¨s le dÃ©part dâ€™un projet. Voici quelques facteurs pouvant influencer les rÃ©sultats :
- Le **montant initial** dâ€™argent.
- Le **taux dâ€™intÃ©rÃªt** du compte.
- La **fluctuation** du taux dâ€™intÃ©rÃªt.
- Le **nombre dâ€™annÃ©es** pendant lesquelles lâ€™argent restera dans le compte.

De plus, pour simplifier notre travail, dÃ©cidons de travailler avec des taux annuels. Nous mettrons donc Ã  jour le solde du compte une fois par an.

Avec cela en tÃªte, nous pouvons commencer Ã  coder notre calculateur !

## Environnement de travail

CrÃ©ez un nouveau dossier quelque part sur votre ordinateur, ouvrez-le avec VS Code, et crÃ©ez deux fichiers :

- `main.ts`, oÃ¹ nous Ã©crirons notre code. Pour commencer, vous pouvez ajouter `console.log("Hello!");` dedans.
- `deno.json`, qui permet Ã  VS Code de savoir qu'il s'agit d'un projet Deno et active l'extension Deno. Vous pouvez ajuster les paramÃ¨tres dans ce fichier, mais nous le laisserons vide pour l'instant.

Ouvrez le terminal et exÃ©cutez la commande suivante :  
`deno run --watch --check main.ts`

Cette commande efface le terminal et rÃ©exÃ©cute `main.ts` Ã  chaque fois que vous le sauvegardez (`CMD` + `S` sur Mac ou `CTRL` + `S` sur PC).

![Une capture d'Ã©cran montrant VS Code exÃ©cutant et surveillant un fichier TypeScript.](/assets/saving-account-calculator/watch.png)

## Nombre dâ€™annÃ©es

Si lâ€™argent reste dans le compte Ã©pargne pendant 10 ans, cela signifie que nous devons mettre Ã  jour le solde 10 fois, une fois par an.

Cela semble Ãªtre une tÃ¢che parfaite pour une **boucle** !

CommenÃ§ons par itÃ©rer sur les annÃ©es. Nous pouvons crÃ©er une variable `years` pour quâ€™il soit facile de modifier le nombre dâ€™annÃ©es souhaitÃ© et de relancer le script.

```ts showLineNumbers filename="main.ts"
const years = 10;

for (let year = 0; year < years; year++) {
  console.log({ year });
}
```

<Callout type="info" emoji="ğŸ’¡">
    Vous vous demandez peut-Ãªtre ce quâ€™est `{ year }` dans le code ci-dessus. Câ€™est une faÃ§on plus courte dâ€™Ã©crire `{ year: year }`. Cela demande Ã  votre ordinateur de crÃ©er un objet avec une clÃ© `year` associÃ©e Ã  la valeur contenue dans la variable `year`. Court et efficace, nâ€™est-ce pas ?
</Callout>

![Une capture d'Ã©cran montrant VS Code exÃ©cutant un fichier TypeScript avec une boucle.](/assets/saving-account-calculator/loop.png)

Au lieu dâ€™avoir des nombres de `0` Ã  `9`, il serait prÃ©fÃ©rable dâ€™avoir des annÃ©es.

Ajoutons une variable `startingYear` et mettons Ã  jour notre code.

Voici ce qui se passe maintenant avec notre boucle Ã  la ligne 4 :
- `let year = startingYear` signifie que notre boucle commencera avec lâ€™annÃ©e `2025`.
- `year < startingYear + years` signifie que notre boucle sâ€™exÃ©cutera tant que `year` sera infÃ©rieur Ã  `2025 + 10`.
- `year++` signifie que `year` augmentera de 1 Ã  chaque itÃ©ration.

```ts showLineNumbers filename="main.ts" {1, 4}
const startingYear = 2025;
const years = 10;

for (let year = startingYear; year < startingYear + years; year++) {
  console.log({ year });
}
```

![Une capture d'Ã©cran montrant VS Code exÃ©cutant un fichier TypeScript avec une boucle pour afficher les annÃ©es.](/assets/saving-account-calculator/starting-year.png)

Pendant que nous y sommes, nous pourrions stocker chaque objet pour chaque annÃ©e dans une liste nommÃ©e `results` et tout afficher sous forme de tableau.

```ts showLineNumbers filename="main.ts" {4, 7, 10}
const startingYear = 2025;
const years = 10;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  results.push({ year });
}

console.table(results);
```

![Une capture d'Ã©cran montrant VS Code affichant un tableau dans le terminal.](/assets/saving-account-calculator/table.png)

## Taux dâ€™intÃ©rÃªt et solde

Passons maintenant Ã  lâ€™argent !

Nous pourrions crÃ©er trois nouvelles variables :
- `initialAmount` pour stocker lâ€™argent que nous mettons dans le compte Ã©pargne au dÃ©part. Jâ€™ai mis 5 000 $.
- `interestRate` pour stocker le taux dâ€™intÃ©rÃªt annuel. Je lâ€™ai fixÃ© Ã  2 %.
- `balance`, qui reprÃ©sente le solde du compte Ã©pargne. Cette variable devrait Ãªtre crÃ©Ã©e avec `let`, car nous allons la mettre Ã  jour chaque annÃ©e dans notre boucle. Au dÃ©part, `balance` est Ã©gal Ã  `initialAmount`.

```ts showLineNumbers filename="main.ts" {1, 2, 6}
const initialAmount = 5000;
const interestRate = 2;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  results.push({ year });
}

console.table(results);
```

Dans notre boucle, nous pouvons maintenant crÃ©er la variable `gainsOrLosses` pour stocker les gains ou pertes pour chaque annÃ©e, puis mettre Ã  jour `balance` en consÃ©quence.

Nous pouvons Ã©galement ajouter `gainsOrLosses` et `balance` Ã  notre liste `results`.

```ts showLineNumbers filename="main.ts" {11-17}
const initialAmount = 5000;
const interestRate = 2;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  const gainsOrLosses = balance * (interestRate / 100);

  // C'est une faÃ§on plus courte d'Ã©crire :
  // balance = balance + gainsOrLosses
  balance += gainsOrLosses;

  results.push({ year, gainsOrLosses, balance });
}

console.table(results);
```

<Callout type="info" emoji="ğŸ’¡">
    Notez que `gainsOrLosses` est crÃ©Ã© **Ã  lâ€™intÃ©rieur** des accolades de la boucle. Il est **scopÃ©** dans le bloc de code dÃ©limitÃ© par les `{}`, ce qui signifie quâ€™il nâ€™existe quâ€™Ã  lâ€™intÃ©rieur de ce bloc. Si vous essayez de lâ€™afficher Ã  la ligne 19, vous obtiendrez une erreur. Le **scoping** est une fonctionnalitÃ© importante qui aide Ã  Ã©viter les conflits de variables, mais qui permet Ã©galement Ã  lâ€™ordinateur de libÃ©rer de la mÃ©moire lorsquâ€™une variable nâ€™est plus nÃ©cessaire.
</Callout>

![Une capture d'Ã©cran montrant VS Code avec un calculateur de compte Ã©pargne de base.](/assets/saving-account-calculator/basics.png)

Ã‡a fonctionne ! Vous avez dÃ©jÃ  un calculateur de compte Ã©pargne de base ! Voyez-vous les intÃ©rÃªts composÃ©s faire fructifier votre argent ? ğŸ’µ

AmÃ©liorons-le maintenant.

## Arrondir les valeurs

Par dÃ©faut, nos ordinateurs nâ€™arrondissent pas les valeurs. Nous devons leur indiquer de le faire.

Pour cela, nous pouvons utiliser lâ€™objet global `Math`. Il est toujours disponible lorsque vous codez et contient de nombreuses mÃ©thodes et constantes pratiques. Dans notre cas, nous utiliserons `Math.round()`, qui arrondit un `number` Ã  lâ€™entier le plus proche.

Ici, nous avons juste besoin dâ€™arrondir `gainsOrLosses`.

```ts showLineNumbers filename="main.ts" {11}
const initialAmount = 5000;
const interestRate = 2;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  const gainsOrLosses = Math.round(balance * (interestRate / 100));

  balance += gainsOrLosses;

  results.push({ year, gainsOrLosses, balance });
}

console.table(results);
```

![Une capture d'Ã©cran montrant VS Code affichant des valeurs arrondies pour un calculateur de compte Ã©pargne.](/assets/saving-account-calculator/round.png)

## Randomiser les taux dâ€™intÃ©rÃªt

Cela fonctionne plutÃ´t bien, mais dans la vie, les taux dâ€™intÃ©rÃªt fluctuent au fil du temps.

Bien sÃ»r, nous ne pouvons pas prÃ©dire lâ€™avenir, mais nous pouvons randomiser le taux dâ€™intÃ©rÃªt pour rendre les choses un peu plus intÃ©ressantes.

Pour cela, nous pouvons utiliser `Math.random()`, qui renvoie un nombre compris entre `0` et `1`.

Voyons cela en action en lâ€™appelant dans notre boucle. Nous pouvons commenter `console.table(results)` pour lâ€™instant.

```ts showLineNumbers filename="main.ts" {11, 20}
const initialAmount = 5000;
const interestRate = 2;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  console.log(Math.random());

  const gainsOrLosses = Math.round(balance * (interestRate / 100));

  balance += gainsOrLosses;

  results.push({ year, gainsOrLosses, balance });
}

// console.table(results);
```

<Callout type="info" emoji="ğŸ’¡">
    Il existe de nombreux algorithmes alÃ©atoires. `Math.random()` renvoie une distribution approximativement uniforme, ce qui signifie que vous avez Ã  peu prÃ¨s la mÃªme chance dâ€™obtenir nâ€™importe quel nombre entre 0 et 1. Par ailleurs, ne lâ€™utilisez pas pour quoi que ce soit liÃ© Ã  la sÃ©curitÃ©. Ce nâ€™est pas un algorithme sÃ»r cryptographiquement.
</Callout>

![Une capture d'Ã©cran montrant VS Code affichant des valeurs alÃ©atoires.](/assets/saving-account-calculator/random.png)

Ã€ moins dâ€™Ãªtre extraordinairement chanceux, vous nâ€™aurez pas les mÃªmes nombres que moi d'affichÃ©s dans le terminal. La seule certitude est que nous aurons tous les deux des nombres compris entre `0` et `1`.

Pour randomiser notre taux dâ€™intÃ©rÃªt (qui est actuellement `2`), nous aimerions avoir quelque chose d'**infÃ©rieur** ou **supÃ©rieur** Ã  2, de maniÃ¨re alÃ©atoire. Cette fluctuation pourrait Ãªtre **positive** ou **nÃ©gative**.

Pour obtenir un nombre alÃ©atoire positif ou nÃ©gatif, nous pouvons simplement soustraire `0.5` Ã  nos nombres alÃ©atoires.

```ts showLineNumbers filename="main.ts" {11}
const initialAmount = 5000;
const interestRate = 2;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  console.log(Math.random() - 0.5);

  const gainsOrLosses = Math.round(balance * (interestRate / 100));

  balance += gainsOrLosses;

  results.push({ year, gainsOrLosses, balance });
}

// console.table(results);
```

![Une capture d'Ã©cran montrant VS Code affichant des valeurs alÃ©atoires comprises entre -0.5 et 0.5.](/assets/saving-account-calculator/random-shift.png)

Maintenant que nous avons des nombres alÃ©atoires compris entre `-0.5` et `0.5`, nous devons dÃ©cider de lâ€™amplitude de ces fluctuations.

Nous pouvons crÃ©er une nouvelle variable `interestRateRange`. Je lâ€™ai fixÃ©e Ã  `20`.

Si nous multiplions nos nombres alÃ©atoires par cette amplitude, nous obtenons maintenant des valeurs alÃ©atoires comprises entre `-10` et `10`. Cela ressemble Ã  une excellente fluctuation de taux dâ€™intÃ©rÃªt !

```ts showLineNumbers filename="main.ts" {3, 12-14}
const initialAmount = 5000;
const interestRate = 2;
const interestRateRange = 20;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  const randomNumber = Math.random() - 0.5;
  const randomFluctuation = randomNumber * interestRateRange;
  console.log(randomFluctuation);

  const gainsOrLosses = Math.round(balance * (interestRate / 100));

  balance += gainsOrLosses;

  results.push({ year, gainsOrLosses, balance });
}

// console.table(results);
```

![Une capture d'Ã©cran montrant VS Code affichant des valeurs alÃ©atoires comprises entre -10 et 10.](/assets/saving-account-calculator/random-fluctuation.png)

Nous pouvons maintenant ajouter cette fluctuation Ã  notre `interestRate`. Comme `interestRate` est dÃ©fini Ã  2 % dans mon code, cela me donne un taux dâ€™intÃ©rÃªt de **2 % Â± 10 %** pour une annÃ©e donnÃ©e. Cela signifie que le taux dâ€™intÃ©rÃªt tombera alÃ©atoirement entre **-8 %** (une trÃ¨s mauvaise annÃ©e) et **12 %** (une performance incroyable) !

Mettons Ã  jour notre code et affichons de nouveau notre tableau. Par souci de simplicitÃ©, nous pouvons Ã©galement arrondir notre `randomInterestRate`. Maintenant, Ã  chaque fois que vous sauvegardez (`CMD` + `S` sur Mac ou `CTRL` + `S` sur PC), vous verrez des rÃ©sultats diffÃ©rents !

```ts showLineNumbers filename="main.ts" {14, 16, 22, 28}
const initialAmount = 5000;
const interestRate = 2;
const interestRateRange = 20;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  const randomNumber = Math.random() - 0.5;
  const randomFluctuation = randomNumber * interestRateRange;
  const randomInterestRate = Math.round(interestRate + randomFluctuation);

  const gainsOrLosses = Math.round(balance * (randomInterestRate / 100));

  balance += gainsOrLosses;

  results.push({
    year,
    interestRate: randomInterestRate,
    gainsOrLosses,
    balance,
  });
}

console.table(results);
```

![Une capture d'Ã©cran montrant VS Code affichant des rÃ©sultats alÃ©atoires.](/assets/saving-account-calculator/random-results.png)

## RÃ©pondre Ã  la question

Nous avons maintenant tout ce quâ€™il nous faut pour rÃ©pondre Ã  notre question.

Tout dâ€™abord, rÃ©cupÃ©rons le dernier objet dans notre liste `results`. Cet objet contient le solde final.

En lâ€™utilisant, nous pouvons calculer les pertes ou gains finaux et afficher la rÃ©ponse appropriÃ©e.

```ts showLineNumbers filename="main.ts" {28-40}
const initialAmount = 5000;
const interestRate = 2;
const interestRateRange = 20;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  const randomNumber = Math.random() - 0.5;
  const randomFluctuation = randomNumber * interestRateRange;
  const randomInterestRate = Math.round(interestRate + randomFluctuation);

  const gainsOrLosses = Math.round(balance * (randomInterestRate / 100));

  balance += gainsOrLosses;

  results.push({
    year,
    interestRate: randomInterestRate,
    gainsOrLosses,
    balance,
  });
}

// Comme les index commencent Ã  0,
// l'index du dernier Ã©lÃ©ment
// est le nombre d'Ã©lÃ©ments moins 1.
const lastResult = results[results.length - 1];
const finalGainsOrLosses = lastResult.balance - initialAmount;

if (finalGainsOrLosses > 0) {
  console.log("\nCongratulations! You've made money!\n");
} else if (finalGainsOrLosses < 0) {
  console.log("\nSorry! You've lost money!\n");
} else {
  console.log("\nYou've neither lost nor gained money!\n");
}

console.table(results);
```
<Callout type="info" emoji="ğŸ’¡">
   Le `\n` au dÃ©but et Ã  la fin du texte aux lignes 35, 37 et 39 est un caractÃ¨re spÃ©cial qui indique un saut de ligne. Il est souvent utilisÃ© dans le terminal pour ajouter des lignes vides et rendre le tout plus lisible.
</Callout>

Ce serait une bonne chose dâ€™ajouter plus de dÃ©tails, comme les gains ou pertes rÃ©alisÃ©s, Ã  la fois en chiffres absolus et en pourcentage.

```ts showLineNumbers filename="main.ts" {30-32, 35-40, 42-47}
const initialAmount = 5000;
const interestRate = 2;
const interestRateRange = 20;
const startingYear = 2025;
const years = 10;

let balance = initialAmount;

const results = [];

for (let year = startingYear; year < startingYear + years; year++) {
  const randomNumber = Math.random() - 0.5;
  const randomFluctuation = randomNumber * interestRateRange;
  const randomInterestRate = Math.round(interestRate + randomFluctuation);

  const gainsOrLosses = Math.round(balance * (randomInterestRate / 100));

  balance += gainsOrLosses;

  results.push({
    year,
    interestRate: randomInterestRate,
    gainsOrLosses,
    balance,
  });
}

const lastResult = results[results.length - 1];
const finalGainsOrLosses = lastResult.balance - initialAmount;
const perc = Math.round(
  (finalGainsOrLosses / initialAmount) * 100,
);

if (finalGainsOrLosses > 0) {
  console.log(`
Congratulations! You've made money!
Initial amount: $${initialAmount}
Final amount: $${lastResult.balance}
Gains: $${finalGainsOrLosses} (+${perc}%)
`);
} else if (finalGainsOrLosses < 0) {
  console.log(`
Sorry! You've lost money!
Initial amount: $${initialAmount}
Final amount: $${lastResult.balance}
Losses: $${finalGainsOrLosses} (${perc}%)
`);
} else {
  console.log("\nYou've neither lost nor gained money!\n");
}

console.table(results);
```

<Callout type="info" emoji="ğŸ’¡">
   Les lignes ajoutÃ©es ici (35-40, 42-47) utilisent des **template literals**. Lorsque vous Ã©crivez du texte avec des backticks (`` ` ``), vous pouvez crÃ©er du texte sur plusieurs lignes. Vous pouvez Ã©galement insÃ©rer des variables ou du code dans le texte en utilisant `${}`. Par exemple, `` `Deux multipliÃ© par deux donne ${2 * 2}` `` crÃ©era le texte `"Deux multipliÃ© par deux donne 4"`. Les template literals sont trÃ¨s utiles pour crÃ©er du texte dynamique qui change en fonction de vos donnÃ©es et des rÃ©sultats de vos analyses.
</Callout>

![Une capture d'Ã©cran montrant VS Code affichant les rÃ©sultats d'un calculateur de compte Ã©pargne.](/assets/saving-account-calculator/results.png)

## FÃ©licitations !

Wow ! Vous venez de coder votre premier projet concret avec TypeScript. Vous pouvez Ãªtre fier de vous.

Ajustez les valeurs. Changez les paramÃ¨tres. Amusez-vous !

Ce nâ€™est que le dÃ©but. Maintenant que vous connaissez les bases, qui sait jusqu'oÃ¹ tout cela vous mÃ¨nera ? ğŸš€

<NoticeEnd lang="fr"/>